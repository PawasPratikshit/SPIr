% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_spi.R
\name{add_spi}
\alias{add_spi}
\title{Add Segment Pivotality Index (SPI) to candidate-level data}
\usage{
add_spi(data, pc_id, ac_id, candidate, votes, ...)
}
\arguments{
\item{data}{A data.frame or tibble with candidate-level election results.}

\item{pc_id}{Column identifying the larger constituency (e.g., PC).}

\item{ac_id}{Column identifying the sub-constituency (e.g., AC).}

\item{candidate}{Column identifying candidates (or parties, if unique per PC).}

\item{votes}{Column containing vote totals.}

\item{...}{Optional additional grouping variables (e.g., state, year) that
define separate election contexts. PCs and ACs are defined within these groups.}
}
\value{
A tibble with the same number of rows as \code{data}, augmented with
SPI-related variables (winner/runner IDs, AC- and PC-level margins, SPI).
}
\description{
Computes SPI using \code{compute_spi()} and merges the resulting AC-level
SPI back into the original candidate-level dataset. All rows belonging to
the same group–PC–AC combination receive the same SPI and associated
quantities.
}
