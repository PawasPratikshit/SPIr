% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_spi.R
\name{compute_spi}
\alias{compute_spi}
\title{Compute the Segment Pivotality Index (SPI)}
\usage{
compute_spi(data, pc_id, ac_id, candidate, votes, ...)
}
\arguments{
\item{data}{A data.frame or tibble with candidate-level results.}

\item{pc_id}{Column identifying the larger constituency (e.g., PC).}

\item{ac_id}{Column identifying the sub-constituency (e.g., AC).}

\item{candidate}{Column identifying candidates (or parties, if unique per PC).}

\item{votes}{Column with vote totals.}

\item{...}{Optional additional grouping variables (e.g., state, year) that
define separate election contexts. PCs are defined within these groups.}
}
\value{
A tibble with one row per group–PC–AC combination, including:
winner/runner IDs, AC- and PC-level margins, and SPI.
}
\description{
General-purpose SPI computation for hierarchical election data, where
candidates compete in sub-units (e.g., ACs) nested in larger units (e.g., PCs).

SPI for an AC is:
SPI = (W_ac - R_ac) / | PC_margin - (W_ac - R_ac) |
}
